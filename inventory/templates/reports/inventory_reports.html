{% extends "base.html" %}
{% load staticfiles %}

{% block styles %}
<style type="text/css">
    .demo-container {
        position: relative;
        height: 400px;
    }

    #placeholder {
        width: 100%;
        height: 100%;
    }

     #placeholder2 {
        width: 100%;
        height: 100%;
    }

    #menu {
        position: absolute;
        top: 20px;
        left: 625px;
        bottom: 20px;
        right: 20px;
        width: 200px;
    }

    #menu button {
        display: inline-block;
        width: 200px;
        padding: 3px 0 2px 0;
        margin-bottom: 4px;
        background: #eee;
        border: 1px solid #999;
        border-radius: 2px;
        font-size: 16px;
        -o-box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        -ms-box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        cursor: pointer;
    }

    #description {
        margin: 15px 10px 20px 10px;
    }

    #code {
        display: block;
        width: 870px;
        padding: 15px;
        margin: 10px auto;
        border: 1px dashed #999;
        background-color: #f8f8f8;
        font-size: 16px;
        line-height: 20px;
        color: #666;
    }

    ul {
        font-size: 10pt;
    }

    ul li {
        margin-bottom: 0.5em;
    }

    ul.options li {
        list-style: none;
        margin-bottom: 1em;
    }

    ul li i {
        color: #999;
    }
  </style>

  <!-- SCRIPTS -->
  <script type="text/javascript" src="/static/js/jquery-1.11.2.min.js"></script>
  <script type="text/javascript" src="/static/js/bootstrap.js"></script>
  <script type="text/javascript" src="/static/js/scripts.js"></script>

  <!-- Data Tables Plugin -->
  <script type="text/javascript" src="/static/components/datatables/js/jquery.dataTables.js"></script>
  <script type="text/javascript" src="/static/js/dataTables.bootstrap.min.js"></script>

  <!-- Core Dashboard JS -->
  <script src="/static/components/dashboard/js/sb-admin-2.js"></script>

  <!-- Metis Menu Plugin  -->
  <script type="text/javascript" src="/static/components/metisMenu/dist/metisMenu.min.js"></script>

  <!-- Flot Charts JavaScript  -->
  <script src="/static/components/flot/excanvas.min.js"></script>
  <script src="/static/components/flot/jquery.flot.js"></script>
  <script src="/static/components/flot/jquery.flot.pie.js"></script>
  <script src="/static/components/flot/jquery.flot.resize.js"></script>
  <script src="/static/components/flot/jquery.flot.time.js"></script>
  <script src="/static/components/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
  
  
  <script type="text/javascript">

    $(function() {

        // Example Data

        //var data = [
        //  { label: "Series1",  data: 10},
        //  { label: "Series2",  data: 30},
        //  { label: "Series3",  data: 90},
        //  { label: "Series4",  data: 70},
        //  { label: "Series5",  data: 80},
        //  { label: "Series6",  data: 110}
        //];

        //var data = [
        //  { label: "Series1",  data: [[1,10]]},
        //  { label: "Series2",  data: [[1,30]]},
        //  { label: "Series3",  data: [[1,90]]},
        //  { label: "Series4",  data: [[1,70]]},
        //  { label: "Series5",  data: [[1,80]]},
        //  { label: "Series6",  data: [[1,0]]}
        //];

        //var data = [
        //  { label: "Series A",  data: 0.2063},
        //  { label: "Series B",  data: 38888}
        //];

        // Randomly Generated Data
        var data = [],
            series = Math.floor(Math.random() * 6) + 3;

        for (var i = 0; i < series; i++) {
            data[i] = {
                label: "Series" + (i + 1),
                data: Math.floor(Math.random() * 100) + 1
            }
        }

        var placeholder = $("#placeholder");
        placeholder.unbind();

        $.plot(placeholder, data, {
            series: {
                pie: { 
                    innerRadius: 0.5,
                    show: true
                }
            }
        });

        var placeholder2 = $("#placeholder2");
        placeholder2.unbind();

        $.plot(placeholder2, data, {
          series: {
            pie: { 
              show: true,
              radius: 1,
              label: {
                show: true,
                radius: 3/4,
                formatter: labelFormatter,
                background: {
                  opacity: 0.5
                }
              }
            }
          },
          legend: {
            show: false
          }
        });
    });

    // A custom label formatter used by several of the plots

    function labelFormatter(label, series) {
        return "<div style='font-size:8pt; text-align:center; padding:2px; color:white;'>" + label + "<br/>" + Math.round(series.percent) + "%</div>";
    }

    //

    function setCode(lines) {
        $("#code").text(lines.join("\n"));
    }

    </script>
{% endblock styles %}

{% block content %}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Inventory Report</h1>
    </div>
</div>

<div class="row">
    <div class="col-lg-3">
        <form class="form" method="GET" action="/reports/inventory">
            <div class="form-group">
                <label>Report Type</label>
                <select class="form-control" name="filter" onchange="this.options[this.selectedIndex].value && (window.location = this.options[this.selectedIndex].value);">
                    <option value="/reports/inventory">Inventory</option>
                    <option value="/reports/sales">Sales</option>
                </select>
            </div>
        </form>
    </div>
    <div class="col-lg-9">
        <div class="export-btn-group">
            <a href="#" class="btn btn-success">Filter</a>
            <a href="#" class="btn btn-default">Export Data</a>
        </div>
    </div>
</div>
<br>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">Inventory Levels Chart</div>
            <div class="panel-body">
                <div class="flot-chart">
                    <div class="flot-chart-content" id="inventory-bar" style="padding: 0px; position: relative;width:100%;height:100%;"></div>
                </div>
                <!-- <div id="low-stock-chart" style="height:250px;"></div> -->
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12"> 
        <div class="panel panel-default">
            <div class="panel-heading">Inventory Levels Status</div>
            <div class="panel-body">
                {% if items_length > 0 %}
                <table class="table table-striped table-hover table-condensed">
                    <thead>
                        <tr>
                            <th>Item Description</th>
                            <th>Supplier</th>
                            <th>Store Stock</th>
                            <th>Warehouse Stock</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td>{{ item.category }} {{ item.brand }} {{item.model}}</td>
                            <td>{{ item.supplier.name }}</td>
                            <td>{{ item.store_quantity }}</td>
                            <td>{{ item.warehouse_quantity }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>No items in inventory</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock content %}
{% block scripts %}
    <!-- Flot Charts JavaScript  -->
    <script src="/static/components/flot/excanvas.min.js"></script>
    <script src="/static/components/flot/jquery.flot.js"></script>
    <script src="/static/components/flot/jquery.flot.pie.js"></script>
    <script src="/static/components/flot/jquery.flot.resize.js"></script>
    <script src="/static/components/flot/jquery.flot.time.js"></script>
    <script src="/static/components/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
    <script src="/static/components/dashboard/js/flot-data.js"></script>
    
    <!-- Morris Charts Plugin
    <script src="/static/components/raphael/raphael-min.js"></script>
    <script src="/static/components/morrisjs/morris.min.js"></script> -->
    <!-- <script src="/static/components/dashboard/js/morris-data.js"></script> -->
{% endblock%}